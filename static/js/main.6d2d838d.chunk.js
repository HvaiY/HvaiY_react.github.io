(this.webpackJsonpmy_react=this.webpackJsonpmy_react||[]).push([[5],{119:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var a=n(151),o=n(10),r=n(5),i=n(73),c=function(){return window.localStorage.removeItem("authToken"),window.sessionStorage.removeItem("authToken"),window.localStorage.removeItem("userInfo"),window.sessionStorage.removeItem("userInfo"),{type:r.a.LOGIN_FAILED}},l=function(){return function(e){e(c())}},u=function(e){return function(t){t({type:r.a.START_LOGIN,payload:{isLoading:!0}}),console.log(e),Object(i.f)(e).then((function(e){if(200===e.data.code){var n=e.data.data,i=n.authToken,l=Object(a.a)(n,["authToken"]);l.remember?(window.localStorage.setItem("authToken",i),window.localStorage.setItem("userInfo",JSON.stringify(l))):(window.sessionStorage.setItem("authToken",i),window.sessionStorage.setItem("userInfo",JSON.stringify(l))),t((u=e.data.data,{type:r.a.LOGIN_SUCCESS,payload:Object(o.a)({},u)}))}else t(c());var u}))}},s=function(e){return{type:r.a.CHANGE_AVATAR,payload:{avatar:e}}}},123:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l}));var a=n(5),o=n(73),r=function(){return function(e){e(u()),Object(o.e)().then((function(t){console.log(t),e({type:a.a.START_NOTIFICATION_FETCH,payload:{list:t.data.list}}),e(s())}))}},i=function(e){return function(t){t(u()),setTimeout((function(){t({type:a.a.MARK_NOTIFICATION_AS_READ_BY_ID,payload:{id:e}}),t(s())}),2e3)}},c=function(e){return function(t){t(u()),setTimeout((function(){t({type:a.a.MARK_NOTIFICATION_AS_UNREAD_BY_ID,payload:{id:e}}),t(s())}),2e3)}},l=function(){return function(e){e(u()),setTimeout((function(){e({type:a.a.MARK_NOTIFICATION_AS_READ}),e(s())}),2e3)}},u=function(){return{type:a.a.START_NOTIFICATION_READ}},s=function(){return{type:a.a.FINISH_NOTIFICATION_READ}}},154:function(e,t,n){e.exports=n.p+"static/media/Logo.f5a81b43.png"},171:function(e,t,n){e.exports=n(277)},194:function(e,t,n){},275:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);n(172);var a,o,r=n(7),i=n(0),c=n.n(i),l=n(3),u=n(164),s=n(82),d=n(31),m=n(53),p=n(40),f=n(41),I=n(42),A=n(43),O=n(20),h=n.n(O),T=function(e){Object(A.a)(n,e);var t=Object(I.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){return c.a.createElement("div",null,"loading......")}}]),n}(i.Component),_=h()({loader:function(){return Promise.all([n.e(0),n.e(7),n.e(14)]).then(n.bind(null,1035))},loading:T}),N=h()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(13),n.e(15)]).then(n.bind(null,1036))},loading:T}),g=h()({loader:function(){return n.e(17).then(n.bind(null,1037))},loading:T}),E=h()({loader:function(){return n.e(19).then(n.bind(null,1038))},loading:T}),b=h()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(9)]).then(n.bind(null,1041))},loading:T}),y=h()({loader:function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(3),n.e(11)]).then(n.bind(null,1042))},loading:T}),S=h()({loader:function(){return Promise.all([n.e(0),n.e(2),n.e(12)]).then(n.bind(null,1043))},loading:T}),v=h()({loader:function(){return n.e(16).then(n.bind(null,1039))},loading:T}),R=h()({loader:function(){return Promise.all([n.e(0),n.e(10),n.e(18)]).then(n.bind(null,1040))},loading:T}),C=n(278),D=n(280),L=n(281),w=[{pathname:"/Login",component:N,roles:["001","002","003"]},{pathname:"/404",component:g,roles:["001","002","003"]}],F=[{pathname:"/admin/dashboard",component:_,title:"\u4eea\u8868\u76d8",isNav:!0,icon:C.a,roles:["001","002","003"]},{pathname:"/admin/settings",component:E,title:"\u8bbe\u7f6e",isNav:!0,icon:D.a,roles:["001"]},{pathname:"/admin/article",component:b,exact:!0,title:"\u6587\u7ae0\u5217\u8868",isNav:!0,icon:L.a,roles:["002","003"]},{pathname:"/admin/article/edit/:id",component:y,title:"\u6587\u7ae0\u7f16\u8f91",roles:["002","003"]},{pathname:"/admin/notification",component:S,title:"\u901a\u77e5\u4e2d\u5fc3",roles:["001","002","003"]},{pathname:"/admin/noauth",component:v,title:"\u672a\u6388\u6743",roles:["001","002","003"]},{pathname:"/admin/profile",component:R,title:"\u4e2a\u4eba\u8bbe\u7f6e",roles:["001","002","003"]}],j=(n(169),n(120)),k=(n(186),n(161)),B=(n(170),n(111)),M=(n(189),n(38)),G=(n(191),n(30)),H=n(279),K=n(154),U=n.n(K),x=(n(194),n(123)),P=n(119),Y=(G.a.SubMenu,M.a.Header),J=M.a.Content,V=M.a.Sider,q=F.filter((function(e){return!0===e.isNav})),z=Object(m.b)((function(e){return{notification:e.notifications.list.filter((function(e){return!1===e.hasRead})).length,avatar:e.user.avatar,displayName:e.user.displayName}}),{fetchNotificationByPost:x.a,logout:P.c})(a=Object(d.g)(a=function(e){Object(A.a)(n,e);var t=Object(I.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).OnDropdownMenuClick=function(t){var n=t.key;"/logout"===n?e.props.logout():e.props.history.push(n)},e.onMenuCLick=function(t){var n=t.key;console.log(n),e.props.history.push(n)},e.renderDropDown=function(){return c.a.createElement(G.a,{onClick:e.OnDropdownMenuClick},c.a.createElement(G.a.Item,{key:"/admin/notification"},c.a.createElement(B.a,{dot:Boolean(e.props.notification)},"\u901a\u77e5\u4e2d\u5fc3 ")),c.a.createElement(G.a.Item,{key:"/admin/profile"},"\u4e2a\u4eba\u8bbe\u7f6e"),c.a.createElement(G.a.Item,{key:"/logout"},"\u9000\u51fa\u767b\u5f55"))},e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchNotificationByPost()}},{key:"render",value:function(){console.log(this.props);var e=this.props.location.pathname.split("/");return e.length=3,c.a.createElement(M.a,{style:{minHeight:"100%"}},c.a.createElement(Y,{className:"demo-header "},c.a.createElement("div",{className:"demo-logo"},c.a.createElement("img",{src:U.a,alt:"ReactTest"})),c.a.createElement("div",null,c.a.createElement(j.a,{overlay:this.renderDropDown,trigger:["click"]},c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement(k.a,{src:this.props.avatar}),c.a.createElement("span",null,"\u6b22\u8fce\u60a8,",this.props.displayName,c.a.createElement(B.a,{count:this.props.notification,offset:[-5,-8]},c.a.createElement(H.a,null))))))),c.a.createElement(M.a,null,c.a.createElement(V,{width:200,className:"site-layout-background"},c.a.createElement(G.a,{mode:"inline",defaultSelectedKeys:[e.join("/")],onClick:this.onMenuCLick,style:{height:"100%",borderRight:0}},q.map((function(e){return c.a.createElement(G.a.Item,{key:e.pathname},c.a.createElement(e.icon,null),e.title)})))),c.a.createElement(M.a,{style:{padding:"2px"}},c.a.createElement(J,{style:{background:"#fff",margin:0}},this.props.children))))}}]),n}(i.Component))||a)||a,Q=Object(m.b)((function(e){return{isLogin:e.user.isLogin,role:e.user.role}}))(o=function(e){Object(A.a)(n,e);var t=Object(I.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=this;return this.props.isLogin?c.a.createElement(z,null,c.a.createElement(d.d,null,F.map((function(t){return c.a.createElement(d.b,{key:t.pathname,path:t.pathname,exact:t.exact,render:function(n){return t.roles.includes(e.props.role)?c.a.createElement(t.component,n):c.a.createElement(d.a,{to:"/admin/noauth"})}})})),c.a.createElement(d.a,{to:F[0].pathname,from:"/admin",exact:!0}),c.a.createElement(d.a,{to:"/404"}))):c.a.createElement(d.a,{to:"/login"})}}]),n}(i.Component))||o,W=n(36),X=n(162),Z=n(10),$=n(5),ee={isLoading:!1,list:[{id:1,title:"AAAAA",desc:"this A ,that a ,we are all an a",hasRead:!1},{id:2,title:"BBBBB",desc:"this b ,that b ,we are all a b",hasRead:!0}]},te=Boolean(window.localStorage.getItem("authToken"))||Boolean(window.sessionStorage.getItem("authToken")),ne=JSON.parse(window.localStorage.getItem("userInfo"))||JSON.parse(window.sessionStorage.getItem("userInfo")),ae=Object(Z.a)({},ne,{isLogin:te,isLoading:!1}),oe=Object(W.c)({notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $.a.START_NOTIFICATION_FETCH:return Object(Z.a)({},e,{list:t.payload.list});case $.a.MARK_NOTIFICATION_AS_READ_BY_ID:var n=e.list.map((function(e){return e.id===t.payload.id&&(e.hasRead=!0),e}));return Object(Z.a)({},e,{list:n});case $.a.MARK_NOTIFICATION_AS_UNREAD_BY_ID:var a=e.list.map((function(e){return e.id===t.payload.id&&(e.hasRead=!1),e}));return Object(Z.a)({},e,{list:a});case $.a.MARK_NOTIFICATION_AS_READ:var o=e.list.map((function(e){return e.hasRead=!0,e}));return Object(Z.a)({},e,{list:o});case $.a.START_NOTIFICATION_READ:return Object(Z.a)({},e,{isLoading:!0});case $.a.FINISH_NOTIFICATION_READ:return Object(Z.a)({},e,{isLoading:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case $.a.LOGIN_SUCCESS:return Object(Z.a)({},e,{},t.payload,{isLogin:!0,isLoading:!1});case $.a.LOGIN_FAILED:return{id:"",displayName:"",avatar:"",isLogin:!1,isLoading:!1,role:[]};case $.a.START_LOGIN:return Object(Z.a)({},e,{isLoading:t.payload.isLoading});case $.a.CHANGE_AVATAR:return Object(Z.a)({},e,{avatar:t.payload.avatar});default:return e}}}),re=Object(W.d)(oe,Object(W.a)(X.a));n(275);Object(l.render)(c.a.createElement(m.a,{store:re},c.a.createElement(r.b,{locale:u.a},c.a.createElement(s.a,null,c.a.createElement(d.d,null,c.a.createElement(d.b,{path:"/admin",render:function(e){return c.a.createElement(Q,e)}}),w.map((function(e){return c.a.createElement(d.b,{key:e.pathname,path:e.pathname,component:e.component})}))," ",c.a.createElement(d.a,{to:"/admin",from:"/",exact:!0}),c.a.createElement(d.a,{to:"./404"}))," ")," ")),document.querySelector("#root"))},5:function(e,t,n){"use strict";t.a={MARK_NOTIFICATION_AS_READ_BY_ID:"MARK_NOTIFICATION_AS_READ_BY_ID",MARK_NOTIFICATION_AS_UNREAD_BY_ID:"MARK_NOTIFICATION_AS_UNREAD_BY_ID",MARK_NOTIFICATION_AS_READ:"MARK_NOTIFICATION_AS_READ",START_NOTIFICATION_READ:"START_NOTIFICATION_READ",FINISH_NOTIFICATION_READ:"FINISH_NOTIFICATION_READ",START_NOTIFICATION_FETCH:"START_NOTIFICATION_FETCH",START_LOGIN:"START_LOGIN",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGIN_FAILED:"LOGIN_FAILED",CHANGE_AVATAR:"CHANGE_AVATAR"}},73:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"f",(function(){return f}));n(168);var a=n(121),o=n(110),r=n.n(o),i=r.a.create({baseURL:""}),c=r.a.create({baseURL:""});i.interceptors.request.use((function(e){return console.log(e),e.data=Object.assign({},e.data,{authToken:"itisToken"}),e})),i.interceptors.response.use((function(e){if(console.log("messagess"),200===e.data.code)return e.data;a.a.error("\u8bf7\u6c42\u9519\u8bef")}));var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i.post("/api/v1/articleList",{offset:e,limited:t})},u=function(e){return i.post("/api/v1/articleDelete/".concat(e))},s=function(e){return i.post("/api/v1/article/".concat(e))},d=function(e,t){return i.post("/api/v1/articleEdit/".concat(e),t)},m=function(){return i.post("/api/v1/articleAmount")},p=function(){return i.post("/api/v1/notifications")},f=function(e){return console.log(e),c.post("/api/v1/login",e)}}},[[171,6,8]]]);
//# sourceMappingURL=main.6d2d838d.chunk.js.map